{{- define "main" -}}

{{- if (and site.Params.profileMode.enabled .IsHome) -}}
{{- partial "index_profile.html" . -}}
{{- else }}

{{- if not .IsHome | and .Title -}}
<header class="page-header">
  {{- partial "breadcrumbs.html" . -}}
  <h1>{{ .Title }}</h1>
  {{- if .Description -}}
  <div class="page-description">{{ .Description | markdownify }}</div>
  {{- end -}}
</header>
{{- end -}}

<style>
  .projects-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 2rem;
    padding: 2rem;
  }

  .project-card {
    background: #fff;
    border-radius: 8px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    padding: 1.5rem;
    transition: transform 0.2s ease-in-out;
  }

  .project-card:hover {
    transform: translateY(-5px);
  }

  .project-title {
    font-size: 1.5rem;
    margin-bottom: 1rem;
    color: #333;
  }

  .project-description {
    color: #666;
    line-height: 1.6;
  }

  @media (max-width: 768px) {
    .projects-grid {
      grid-template-columns: 1fr;
      padding: 1rem;
    }
  }
</style>

<div class="projects-grid">
  {{- $pages := where .Site.RegularPages "Section" "projects" -}}
  {{- range $pages -}}
  <article class="project-card">
    <h2 class="project-title">
      <a href="{{ .Params.link }}" style="color: inherit; text-decoration: none;">{{ .Title }}</a>
    </h2>
    <div class="project-description">
      {{- if .Description -}}
        {{ .Description | markdownify }}
      {{- else -}}
        {{ .Summary | plainify | truncate 160 }}
      {{- end -}}
    </div>
  </article>
  {{- end -}}
</div>

{{- end }}

{{- end }}
